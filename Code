-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if
you find any bugs, including reproduction steps.
BEGIN;

CREATE TABLE IF NOT EXISTS public.&quot;order&quot;
(
order_id integer NOT NULL,
supplier_id integer NOT NULL,
sparepart_id integer NOT NULL,
warehouse_id integer NOT NULL,
CONSTRAINT order_pkey PRIMARY KEY (order_id)
);
CREATE TABLE IF NOT EXISTS public.sparepart
(
sparepart_id integer NOT NULL,
sparepart_info character varying(50) COLLATE pg_catalog.&quot;default&quot;,
sparepart_name character varying(20) COLLATE pg_catalog.&quot;default&quot; NOT
NULL,
CONSTRAINT sparepart_pkey PRIMARY KEY (sparepart_id)
);
CREATE TABLE IF NOT EXISTS public.supplier
(
supplier_id integer NOT NULL,

15

available_quantity integer NOT NULL,
phone_supplier integer,
supplier_name character varying(25) COLLATE pg_catalog.&quot;default&quot; NOT NULL,
CONSTRAINT supplier_pkey PRIMARY KEY (supplier_id)
);
CREATE TABLE IF NOT EXISTS public.supplier_sparepart
(
sparepart_id integer NOT NULL,
supplier_id integer NOT NULL,
sups_id integer NOT NULL,
&quot;when&quot; timestamp with time zone NOT NULL,
CONSTRAINT supplier_sparepart_pkey PRIMARY KEY (sups_id)
);
CREATE TABLE IF NOT EXISTS public.warehouse
(
warehouse_id integer NOT NULL,
warehouse_phone integer,
available_spareparts integer NOT NULL,
CONSTRAINT warehouse_pkey PRIMARY KEY (warehouse_id)
);
CREATE TABLE IF NOT EXISTS public.warehouse_sparepart
(
sparepart_id integer NOT NULL,
warehouse_id integer NOT NULL,
&quot;how long?&quot; daterange NOT NULL,
wars_id integer NOT NULL,
CONSTRAINT warehouse_sparepart_pkey PRIMARY KEY (wars_id)
);
ALTER TABLE IF EXISTS public.&quot;order&quot;
ADD CONSTRAINT s2o FOREIGN KEY (supplier_id)
REFERENCES public.supplier (supplier_id) MATCH SIMPLE
ON UPDATE NO ACTION
ON DELETE NO ACTION
NOT VALID;

ALTER TABLE IF EXISTS public.&quot;order&quot;
ADD CONSTRAINT sp2o FOREIGN KEY (sparepart_id)
REFERENCES public.sparepart (sparepart_id) MATCH SIMPLE
ON UPDATE NO ACTION

16

ON DELETE NO ACTION
NOT VALID;

ALTER TABLE IF EXISTS public.&quot;order&quot;
ADD CONSTRAINT w2o FOREIGN KEY (warehouse_id)
REFERENCES public.warehouse (warehouse_id) MATCH SIMPLE
ON UPDATE NO ACTION
ON DELETE NO ACTION
NOT VALID;

ALTER TABLE IF EXISTS public.supplier_sparepart
ADD CONSTRAINT s2sup FOREIGN KEY (supplier_id)
REFERENCES public.supplier (supplier_id) MATCH SIMPLE
ON UPDATE NO ACTION
ON DELETE NO ACTION;

ALTER TABLE IF EXISTS public.supplier_sparepart
ADD CONSTRAINT sup2s FOREIGN KEY (sparepart_id)
REFERENCES public.sparepart (sparepart_id) MATCH SIMPLE
ON UPDATE NO ACTION
ON DELETE NO ACTION;

ALTER TABLE IF EXISTS public.warehouse_sparepart
ADD CONSTRAINT s2w FOREIGN KEY (warehouse_id)
REFERENCES public.warehouse (warehouse_id) MATCH SIMPLE
ON UPDATE NO ACTION
ON DELETE NO ACTION
NOT VALID;

ALTER TABLE IF EXISTS public.warehouse_sparepart
ADD CONSTRAINT w2s FOREIGN KEY (sparepart_id)
REFERENCES public.sparepart (sparepart_id) MATCH SIMPLE
ON UPDATE NO ACTION
ON DELETE NO ACTION
NOT VALID;
END;
